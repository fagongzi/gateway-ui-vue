(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df94039c"],{"593b":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"dataForm",attrs:{rules:t.rules,model:t.tempItem,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"Cluster名称",prop:"name"}},[n("el-input",{staticStyle:{width:"200px"},model:{value:t.tempItem.name,callback:function(e){t.$set(t.tempItem,"name",e)},expression:"tempItem.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"负载均衡算法"}},[n("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"负载均衡算法"},model:{value:t.tempItem.loadBalance,callback:function(e){t.$set(t.tempItem,"loadBalance",e)},expression:"tempItem.loadBalance"}},t._l(t.loadBalanceConstant,function(t){return n("el-option",{key:t.value,attrs:{value:t.value,label:t.title}})}),1)],1),t._v(" "),n("div",{staticStyle:{"margin-left":"70px"}},[n("el-button",{on:{click:t.goList}},[t._v("返回")]),t._v(" "),t.isCreate?n("el-button",{attrs:{loading:t.submitting,type:"primary"},on:{click:function(e){return t.createItem("dataForm")}}},[t._v("提交\n            ")]):t.isUpdate?n("el-button",{attrs:{loading:t.submitting,type:"primary"},on:{click:function(e){return t.updateItem("dataForm")}}},[t._v("提交\n            ")]):t._e()],1)],1)],1)},a=[],r=(n("a481"),n("2435")),s=n("7ea2"),o=n("ed08");function u(){return{id:void 0,name:void 0,loadBalance:r["j"].roundRobin}}var c={name:"clusterForm",props:{showType:{type:String,default:r["d"].create},editItem:{type:Object}},data:function(){return{loading:!0,submitting:!1,loadBalanceConstant:r["i"],rules:{name:{required:!0,message:"请填写集群名称",trigger:"change"}},tempItem:u()}},watch:{editItem:function(t,e){this.tempItem=Object(o["d"])(this.tempItem,Object(o["a"])(t)),this.loading=!1,this.submitting=!1}},computed:{isShow:function(){return this._isShow()},isCreate:function(){return this._isCreate()},isUpdate:function(){return this._isUpdate()}},created:function(){this.init()},methods:{init:function(){this._isShow()?this.rules={}:this._isCreate()&&(this.loading=!1)},goList:function(){this.$router.replace({path:"/cluster"}),this.$destroy()},createItem:function(t){var e=this;this.submitting||this.$refs[t].validate(function(t){if(!t)return!1;e._doCreateItem()})},_doCreateItem:function(){var t=this,e=Object(o["a"])(this.tempItem);this.submitting=!0,s["e"](e).then(function(){t.$message({type:"success",message:"创建成功!"}),setTimeout(function(){t.goList()},2e3)}).catch(function(){t.submitting=!1})},updateItem:function(t){var e=this;this.submitting||this.$refs[t].validate(function(t){if(!t)return!1;e._doUpdateItem()})},_doUpdateItem:function(){var t=this,e=Object(o["a"])(this.tempItem);this.submitting=!0,s["e"](e).then(function(){t.$message({type:"success",message:"修改成功!"}),setTimeout(function(){t.goList()},2e3)}).catch(function(){t.submitting=!1})},_isUpdate:function(){return this.showType===r["d"].update},_isShow:function(){return this.showType===r["d"].show},_isCreate:function(){return this.showType===r["d"].create}}},m=c,d=n("2877"),l=Object(d["a"])(m,i,a,!1,null,"eee54722",null);e["a"]=l.exports},"7ea2":function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"a",function(){return m}),n.d(e,"c",function(){return d});var i=n("b775"),a=n("2435"),r="/clusters";function s(t){return Object(i["a"])({url:r,method:"GET",params:t})}function o(){return new Promise(function(t,e){var n=[],i="",r=a["c"];function o(a){s(a).then(function(e){e=e||[];var a=e.length;if(a>0){if(n=n.concat(e),i=e[a-1]||{},i.id){var s={after:i.id,limit:r};o(s)}}else t(n)}).catch(function(){e()})}var u={after:"",limit:r};o(u)})}function u(t){return Object(i["a"])({url:r+"/"+t,method:"GET"})}function c(t){return Object(i["a"])({url:r,method:"PUT",data:t})}function m(t){return Object(i["a"])({url:r+"/"+t,method:"DELETE"})}function d(t){return Object(i["a"])({url:r+"/"+t+"/binds",method:"GET"})}},b775:function(t,e,n){"use strict";var i=n("bc3a"),a=n.n(i),r=n("5c96"),s="",o="",u=o+"/v1",c=a.a.create({baseURL:s+u,timeout:6e4});c.interceptors.request.use(function(t){return t},function(t){console.error(t),Promise.reject(t)}),c.interceptors.response.use(function(t){var e=t.data||{};t.headers;return 0===e.code?e.data:(Object(r["Message"])({message:e.data,type:"error",duration:5e3}),Promise.reject("error"))},function(t){return Object(r["Message"])({message:t.data||"网络异常",type:"error",duration:5e3}),Promise.reject(t)}),e["a"]=c},caf0:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("cluster-form",{attrs:{"show-type":"update",editItem:t.item},on:{"update:editItem":function(e){t.item=e},"update:edit-item":function(e){t.item=e}}})],1)},a=[],r=(n("7f7f"),n("593b")),s=n("7ea2"),o="clusterEdit",u={name:o,data:function(){return{id:"",item:{}}},components:{ClusterForm:r["a"]},created:function(){this.init()},watch:{$route:function(t,e){t.name!=o&&this.$destroy()}},methods:{init:function(){var t=this;this.id=this.$route.query.id;var e=this.id;e&&s["d"](e).then(function(e){t.item=e})}}},c=u,m=n("2877"),d=Object(m["a"])(c,i,a,!1,null,"4ab18a9c",null);e["default"]=d.exports}}]);